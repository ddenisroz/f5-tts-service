# ==============================================================================
# F5_tts/.env.example
# Copy to .env and fill values.
# ==============================================================================

# --- Runtime mode ---
# development | production
ENVIRONMENT=development
# true = verbose diagnostics
TTS_DEBUG=true
# DEBUG | INFO | WARNING | ERROR | CRITICAL
TTS_LOG_LEVEL=INFO
# Uvicorn/root log level
LOG_LEVEL=INFO

# --- Auth / security ---
# MUST match bot_service SECRET_KEY
SECRET_KEY=replace-with-bot-service-secret
ALGORITHM=HS256
# Optional shared key for bot_service internal calls
TTS_INTERNAL_API_KEY=
# Internal service JWT validation (bot_service -> F5_tts)
# Optional dedicated secret. If empty, SECRET_KEY is used.
INTERNAL_SERVICE_JWT_SECRET=
INTERNAL_SERVICE_JWT_ISSUER=bot_service
INTERNAL_SERVICE_JWT_AUDIENCE=f5_tts
INTERNAL_SERVICE_JWT_ALLOWED_SUBJECTS=bot_service

# --- Server ---
TTS_HOST=0.0.0.0
TTS_PORT=8001
BOT_SERVICE_URL=http://localhost:8000

# --- Database ---
# PostgreSQL only
# Must be set explicitly for F5_tts runtime.
DATABASE_URL=postgresql://user:password@127.0.0.1:5432/f5_tts_db
# Standalone compose helper vars (used by deploy/docker-compose.*.yml)
POSTGRES_USER=user
POSTGRES_PASSWORD=change_me
POSTGRES_DB=f5_tts_db

# --- CORS ---
# Comma-separated
CORS_ORIGINS=http://localhost:5173,http://localhost:3000,http://localhost:8000

# --- Core TTS tuning ---
# Compatibility aliases used by existing tests/integrations
TTS_ENGINE=f5
F5_TTS_DEVICE=cuda
TTS_CFG_STRENGTH=2.5
# Global per-user limits fallback
TTS_MAX_TEXT_LENGTH=200
TTS_DAILY_LIMIT=100
TTS_GPU_TIME_LIMIT=300.0
# Disable transcription stage if needed: true | false
DISABLE_TRANSCRIPTION=false

# --- Logging ---
# Optional explicit path for app logger file
TTS_LOG_FILE=
LOG_DIR=./logs
ENABLE_LOG_ROTATION=true

# --- Worker / queue / tasks (optional) ---
REDIS_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/1
TTS_SERVICE_URL=http://localhost:8001
WORKER_ID=
REDIS_PASSWORD=change_me

# --- GPU worker pool (optional advanced) ---
GPU_REDIS_URL=redis://localhost:6379/0
GPU_INPUT_STREAM=tts_requests
GPU_OUTPUT_STREAM=tts_results
GPU_STREAM=gpu_tts_requests
GPU_RESULTS_STREAM=gpu_tts_results
GPU_CONSUMER_GROUP=gpu_workers
GPU_MIN_CONCURRENT=1
GPU_INITIAL_CONCURRENT=2
GPU_MAX_CONCURRENT=4
GPU_MEMORY_THRESHOLD_LOW=0.3
GPU_MEMORY_THRESHOLD_HIGH=0.8
GPU_MEMORY_THRESHOLD_CRITICAL=0.9
GPU_MONITORING_INTERVAL=5.0
GPU_HEALTH_HISTORY_SIZE=100
GPU_TASK_TIMEOUT=300.0
GPU_BATCH_SIZE=10
GPU_RETRY_ATTEMPTS=3
GPU_RETRY_DELAY=5.0
